<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>SilentSkins Gallery</title>
    <style>
        body {{ margin: 0; font-family: Arial, sans-serif; background-color: #111; color: #fff; text-align: center; }}
        h1 {{ margin-top: 20px; }}
        .container {{ padding: 10px; }}
        input[type="file"], input[type="text"] {{ padding: 10px; margin: 10px auto; display: block; width: 90%; max-width: 400px; }}
        .skin-card {{ background: #222; margin: 10px auto; padding: 10px; border-radius: 10px; max-width: 300px; }}
        .skin-card img {{ width: 100%; border-radius: 8px; }}
        .btn {{ background-color: #00cc44; color: white; padding: 8px 16px; border: none; border-radius: 5px; cursor: pointer; }}
        canvas {{ width: 100%; height: 300px; }}
    </style>
</head>
<body>
    <h1>SilentSkins Gallery</h1>
    <input type="text" id="searchBar" placeholder="Search skins..." onkeyup="filterSkins()" />
    <input type="file" id="skinUpload" accept=".png" onchange="handleUpload()" />

    <div id="viewer" class="container"></div>
    <div id="skins" class="container"></div>

    <script src="https://unpkg.com/skinview3d"></script>
    <script>
        const skins = [
            {{ name: "Bloom", file: "bloom.png" }},
            {{ name: "Knight", file: "knight.png" }}
        ];

        function loadSkins() {{
            const container = document.getElementById("skins");
            container.innerHTML = "";
            skins.forEach(skin => {{
                const card = document.createElement("div");
                card.className = "skin-card";
                card.innerHTML = `
                    <h3>${{skin.name}}</h3>
                    <img src="assets/skins/${{skin.file}}" alt="${{skin.name}} preview" />
                    <br />
                    <a class="btn" href="assets/skins/${{skin.file}}" download>Download</a>
                    <button class="btn" onclick="load3DPreview('assets/skins/${{skin.file}}')">3D Preview</button>
                `;
                container.appendChild(card);
            }});
        }}

        function load3DPreview(file) {{
            const viewer = document.getElementById("viewer");
            viewer.innerHTML = "";
            const skinViewer = new skinview3d.SkinViewer({{ canvas: document.createElement("canvas"), width: 300, height: 300 }});
            skinViewer.loadSkin(file);
            viewer.appendChild(skinViewer.canvas);
        }}

        function filterSkins() {{
            const value = document.getElementById("searchBar").value.toLowerCase();
            document.querySelectorAll(".skin-card").forEach(card => {{
                const name = card.querySelector("h3").innerText.toLowerCase();
                card.style.display = name.includes(value) ? "" : "none";
            }});
        }}

        function handleUpload() {{
            alert("Upload feature is a placeholder in demo.");
        }}

        window.onload = loadSkins;
    </script>
</body>
</html>
